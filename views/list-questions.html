<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
    <title>FPT Coding Project</title>
    <!-- BOOTSTRAP CORE STYLE  -->
    <link href="/libs/css/bootstrap.css" rel="stylesheet" />
    <!-- FONT AWESOME ICONS  -->
    <link href="/libs/css/font-awesome.css" rel="stylesheet" />
    <!-- CUSTOM STYLE  -->
    <link rel="stylesheet" type="text/css" href="/libs/css/post-question.css" />
    <!-- Style for Tags input plugin -->
    <link rel="stylesheet" type="text/css" href="/libs/css/bootstrap-tagsinput.css" />

     <!-- HTML5 Shiv and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Script for Markdown Editor -->
    <script type="text/javascript" src="/libs/js/Markdown.Converter.js"></script>
    <script type="text/javascript" src="/libs/js/Markdown.Editor.js"></script>
    <script type="text/javascript" src="/libs/js/Markdown.Sanitizer.js"></script>

    <!-- Script for Tags input plugin -->
    <script type="text/javascript" src="/libs/js/jquery.min.js"></script>
    <script type="text/javascript" src="/libs/js/bootstrap-tagsinput.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
        $('.nav-toggle').click(function() {
            var editorID = $(this).attr('href');
            var btn = $(this);
            $(editorID).slideToggle(function() {
                if ($(this).css('display') == 'none') {
                    btn.html('Show');
                    $('#main-content').css('margin-bottom', 0);
                } else {
                    btn.html('Hide');
                    $('#main-content').css('margin-bottom', $(editorID).css('height'));
                }
            })
        })
    })
    </script>
</head>
<body>
    <div id="main-content">
        <button href="#editor" class="nav-toggle">Đặt câu hỏi</button>

        <h2>Tất cả câu hỏi</h2>
        {% for question in questions %}
            <div class="question">
            <div class="question-title">
                <h2><a href="/question/{{ question._id }}">{{ question.title }}</a></h2> (created at {{ question.time }})
            </div>
            {% for tag in question.tags %}
                <span class="label label-info">{{ tag }}</span>
            {% endfor %}
            </div>
        {% endfor %}
    </div>
    <div id="editor" class="panel panel-primary">
    <div class="panel-heading">Đặt câu hỏi</div>
    <div class="panel-body">
        <div class="form-group">
        <form role="form" method="post">
                <div id="form-title">
                    <label for="title">Tiêu đề</label>
                    <input type="text" class="form-control" id="title" name="title"
                    placeholder="Chủ đề cho câu hỏi của bạn là gì?" />
                </div>

                <div class="wmd-panel">
                    <div id="wmd-button-bar"></div>
                    <textarea class="wmd-input form-control" id="wmd-input" name="content"></textarea>
                </div>
                <div id="wmd-preview" class="wmd-panel wmd-preview form-control"></div>

                <input type="text" data-role="tagsinput" placeholder="Tags..." id="tags-input" class="form-control" />
                <input type="hidden" id="tags" name="tags" />
                <button type="submit" class="btn btn-default" onclick="$('#tags').val($('#tags-input').val());">
                    Tạo câu hỏi
                </button>
        </form>
        </div>
        <script type="text/javascript">
        (function () {
            var converter1 = Markdown.getSanitizingConverter();

            converter1.hooks.chain("preBlockGamut", function (text, rbg) {
                return text.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm, function (whole, inner) {
                    return "<blockquote>" + rbg(inner) + "</blockquote>\n";
                });
            });

            var editor1 = new Markdown.Editor(converter1);

            editor1.run();
        })();
        </script>
    </div>
    </div>
</body>
</html>